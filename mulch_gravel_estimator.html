<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mulch & Gravel Estimator | HomeLab Playground</title>
    <link rel="icon" type="image/png" href="https://homelabplayground.com/favicon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        obsidian: {
                            bg: '#1e1e1e',      // Main background
                            pane: '#252526',    // Headers/Panels
                            border: '#3c3c3c',  // Borders
                            accent: '#7c3aed',  // Violet Primary
                            text: '#cccccc'     // Standard Text
                        }
                    },
                    fontFamily: {
                        mono: ['"Fira Code"', 'Consolas', 'Monaco', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e1e1e; 
        }
        ::-webkit-scrollbar-thumb {
            background: #3c3c3c; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #505050; 
        }

        /* Number Input Arrow Removal */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Smooth transitions */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden bg-obsidian-bg text-obsidian-text font-sans">

    <header class="h-14 bg-obsidian-pane border-b border-obsidian-border flex items-center justify-between px-4 md:px-6 shrink-0 z-20">
        <div class="flex items-center gap-3">
            <i class="fa-solid fa-mound text-obsidian-accent text-lg"></i>
            <h1 class="font-bold text-lg tracking-wide text-white">Mulch & Gravel Estimator</h1>
        </div>
        <button onclick="resetTool()" class="text-xs text-gray-500 hover:text-white transition-colors">
            <i class="fa-solid fa-rotate-right mr-1"></i> Reset
        </button>
    </header>

    <main class="flex-1 overflow-y-auto p-4 md:p-8">
        <div class="max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <div class="lg:col-span-2 space-y-6">
                
                <div class="bg-obsidian-pane border border-obsidian-border rounded-lg p-5">
                    <h2 class="text-white font-semibold mb-4 flex items-center gap-2">
                        <i class="fa-solid fa-sliders text-obsidian-accent"></i> Settings
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs uppercase tracking-wider text-gray-500 mb-1">Target Depth (Inches)</label>
                            <div class="relative">
                                <input type="number" id="depthInput" value="3" min="0.5" step="0.5" oninput="calculate()" 
                                    class="w-full bg-obsidian-bg border border-obsidian-border rounded p-2 pl-3 pr-10 text-white font-mono focus:border-obsidian-accent focus:outline-none transition-colors">
                                <span class="absolute right-3 top-2 text-gray-500 text-sm">in</span>
                            </div>
                            <input type="range" id="depthRange" min="1" max="12" value="3" step="0.5" oninput="syncDepth(this.value)" 
                                class="w-full mt-2 h-1 bg-obsidian-border rounded-lg appearance-none cursor-pointer accent-obsidian-accent">
                        </div>
                        <div>
                            <label class="block text-xs uppercase tracking-wider text-gray-500 mb-1">Bag Size</label>
                            <select id="bagSizeInput" onchange="calculate()" 
                                class="w-full bg-obsidian-bg border border-obsidian-border rounded p-2 text-white font-sans focus:border-obsidian-accent focus:outline-none transition-colors appearance-none">
                                <option value="2">2.0 cu ft (Standard Mulch)</option>
                                <option value="3">3.0 cu ft (Large Mulch)</option>
                                <option value="1.5">1.5 cu ft (Soil)</option>
                                <option value="0.5">0.5 cu ft (Gravel/Pebbles)</option>
                                <option value="1">1.0 cu ft</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    <div class="flex justify-between items-end">
                        <h2 class="text-white font-semibold flex items-center gap-2">
                            <i class="fa-solid fa-layer-group text-obsidian-accent"></i> Areas / Beds
                        </h2>
                        <button onclick="addBed()" class="text-xs bg-obsidian-accent/10 hover:bg-obsidian-accent/20 text-obsidian-accent border border-obsidian-accent/50 px-3 py-1.5 rounded transition-all">
                            <i class="fa-solid fa-plus mr-1"></i> Add Area
                        </button>
                    </div>

                    <div id="bedContainer" class="space-y-3">
                        </div>
                </div>

            </div>

            <div class="lg:col-span-1">
                <div class="bg-obsidian-pane border border-obsidian-border rounded-lg p-5 sticky top-0 lg:h-auto">
                    <h2 class="text-white font-semibold mb-6 flex items-center gap-2 border-b border-obsidian-border pb-3">
                        <i class="fa-solid fa-calculator text-obsidian-accent"></i> Estimation
                    </h2>

                    <div class="space-y-6">
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-gray-500">Total Area Coverage</span>
                            <span class="text-white font-mono"><span id="totalSqFt">0</span> sq ft</span>
                        </div>

                        <div class="bg-obsidian-bg rounded p-4 border border-obsidian-border text-center">
                            <div class="text-3xl font-bold text-white font-mono mb-1" id="totalYards">0.00</div>
                            <div class="text-xs uppercase tracking-wider text-obsidian-accent">Cubic Yards</div>
                            <div class="text-xs text-gray-600 mt-2">1 Cubic Yard = 27 Cubic Feet</div>
                        </div>

                        <div class="bg-obsidian-accent rounded p-4 border border-violet-500 text-center relative overflow-hidden group">
                            <div class="absolute -right-4 -top-4 text-violet-400/20 text-6xl">
                                <i class="fa-solid fa-sack-dollar transform rotate-12"></i>
                            </div>
                            <div class="relative z-10">
                                <div class="text-4xl font-bold text-white font-mono mb-1" id="totalBags">0</div>
                                <div class="text-xs uppercase tracking-wider text-white/80">Bags Needed</div>
                                <div class="text-xs text-white/60 mt-2" id="bagSizeDisplay">Based on 2 cu ft bags</div>
                            </div>
                        </div>

                        <div class="text-xs text-gray-500 italic mt-4 border-t border-obsidian-border pt-4">
                            <p class="mb-2"><i class="fa-solid fa-circle-info mr-1 text-obsidian-accent"></i> <strong>Pro Tip:</strong> Buy 5-10% extra material to account for compression and uneven grading.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <footer class="bg-obsidian-pane border-t border-obsidian-border py-3 text-center shrink-0 z-10 flex flex-col md:flex-row justify-center items-center gap-3">
        <a href="https://homelabplayground.com" class="text-gray-500 hover:text-violet-400 text-xs transition-colors font-sans no-underline">
            HomeLab Playground
        </a>
    
        <span class="hidden md:block text-obsidian-border mx-1">|</span>
    
        <a href="https://www.buymeacoffee.com/bryjogar" target="_blank" class="inline-flex items-center px-3 py-1 bg-obsidian-accent hover:bg-violet-600 text-white text-xs font-sans rounded-full transition-colors no-underline">
            <i class="fa-solid fa-mug-hot mr-1.5"></i>
            <span>Support The Tools</span>
        </a>
    </footer>

    <script>
        // State
        let beds = [
            { id: 1, length: 10, width: 5 } // Default first bed
        ];

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderBeds();
            calculate();
        });

        // Sync Range and Number Input
        function syncDepth(val) {
            document.getElementById('depthInput').value = val;
            calculate();
        }

        // Add a new bed row
        function addBed() {
            const newId = beds.length > 0 ? Math.max(...beds.map(b => b.id)) + 1 : 1;
            beds.push({ id: newId, length: 0, width: 0 });
            renderBeds();
            calculate();
        }

        // Remove a bed row
        function removeBed(id) {
            if (beds.length <= 1) return; // Keep at least one
            beds = beds.filter(b => b.id !== id);
            renderBeds();
            calculate();
        }

        // Update bed data from inputs
        function updateBed(id, field, value) {
            const bed = beds.find(b => b.id === id);
            if (bed) {
                bed[field] = parseFloat(value) || 0;
                calculate();
            }
        }

        // Render HTML for input rows
        function renderBeds() {
            const container = document.getElementById('bedContainer');
            container.innerHTML = '';

            beds.forEach((bed, index) => {
                const isLast = beds.length === 1;
                
                const div = document.createElement('div');
                div.className = 'bg-obsidian-bg border border-obsidian-border rounded p-3 flex flex-col md:flex-row gap-3 items-center fade-in';
                
                div.innerHTML = `
                    <div class="flex items-center justify-center bg-obsidian-pane w-8 h-8 rounded-full text-xs font-bold text-gray-500 border border-obsidian-border shrink-0">
                        ${index + 1}
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 w-full">
                        <div class="relative">
                            <label class="block text-[10px] text-gray-500 mb-1">LENGTH (ft)</label>
                            <input type="number" min="0" step="0.1" value="${bed.length || ''}" 
                                oninput="updateBed(${bed.id}, 'length', this.value)"
                                placeholder="0"
                                class="w-full bg-obsidian-pane border border-obsidian-border rounded p-2 text-white font-mono text-sm focus:border-obsidian-accent focus:outline-none transition-colors">
                        </div>
                        <div class="relative">
                            <label class="block text-[10px] text-gray-500 mb-1">WIDTH (ft)</label>
                            <input type="number" min="0" step="0.1" value="${bed.width || ''}" 
                                oninput="updateBed(${bed.id}, 'width', this.value)"
                                placeholder="0"
                                class="w-full bg-obsidian-pane border border-obsidian-border rounded p-2 text-white font-mono text-sm focus:border-obsidian-accent focus:outline-none transition-colors">
                        </div>
                    </div>

                    ${!isLast ? `
                    <button onclick="removeBed(${bed.id})" class="md:ml-2 text-gray-600 hover:text-red-400 transition-colors p-2 shrink-0">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                    ` : `
                    <div class="w-8 h-8 md:ml-2 shrink-0"></div>
                    `}
                `;
                container.appendChild(div);
            });
        }

        // Core Calculation Logic
        function calculate() {
            // Inputs
            const depthInches = parseFloat(document.getElementById('depthInput').value) || 0;
            const bagSizeCuFt = parseFloat(document.getElementById('bagSizeInput').value) || 2;
            
            // 1. Calculate Total Area (sq ft)
            let totalAreaSqFt = 0;
            beds.forEach(bed => {
                totalAreaSqFt += (bed.length * bed.width);
            });

            // 2. Calculate Volume in Cubic Feet
            // Area * (Depth in inches / 12)
            const volumeCuFt = totalAreaSqFt * (depthInches / 12);

            // 3. Calculate Volume in Cubic Yards
            // 1 Cubic Yard = 27 Cubic Feet
            const volumeCuYards = volumeCuFt / 27;

            // 4. Calculate Bags
            const bagsNeeded = Math.ceil(volumeCuFt / bagSizeCuFt);

            // Update UI
            document.getElementById('totalSqFt').textContent = totalAreaSqFt.toLocaleString('en-US', { maximumFractionDigits: 1 });
            document.getElementById('totalYards').textContent = volumeCuYards.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('totalBags').textContent = bagsNeeded.toLocaleString();
            
            // Update bag label
            const select = document.getElementById('bagSizeInput');
            const label = select.options[select.selectedIndex].text;
            document.getElementById('bagSizeDisplay').textContent = `Based on ${label}`;
        }

        function resetTool() {
            beds = [{ id: 1, length: 10, width: 5 }];
            document.getElementById('depthInput').value = 3;
            document.getElementById('depthRange').value = 3;
            document.getElementById('bagSizeInput').value = 2;
            renderBeds();
            calculate();
        }

    </script>
</body>
</html>