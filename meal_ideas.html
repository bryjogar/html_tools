<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meal Idea Generator</title>
    <link rel="icon" type="image/png" href="https://homelabplayground.com/favicon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        obsidian: {
                            bg: '#1e1e1e',      // Main background
                            pane: '#252526',    // Headers/Panels
                            border: '#3c3c3c',  // Borders
                            accent: '#7c3aed',  // Violet Primary
                            text: '#cccccc'     // Standard Text
                        }
                    },
                    fontFamily: {
                        mono: ['"Fira Code"', 'Consolas', 'Monaco', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif']
                    },
                    animation: {
                        'pulse-fast': 'pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'fade-in': 'fadeIn 0.3s ease-in-out forwards',
                        'fade-out': 'fadeOut 0.3s ease-in-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        fadeOut: {
                            '0%': { opacity: '1', transform: 'translateY(0)' },
                            '100%': { opacity: '0', transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e1e1e; 
        }
        ::-webkit-scrollbar-thumb {
            background: #3c3c3c; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }

        /* Slot Machine Blur Effect during spin */
        .spinning-text {
            filter: blur(1px);
            opacity: 0.7;
        }
        
        /* Checkbox hidden logic for locks */
        .lock-checkbox:checked + label {
            color: #7c3aed; /* obsidian-accent */
            border-color: #7c3aed;
        }
        .lock-checkbox:checked + label i::before {
            content: "\f023"; /* fa-lock */
        }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden bg-obsidian-bg text-obsidian-text font-sans">

    <header class="h-14 bg-obsidian-pane border-b border-obsidian-border flex items-center justify-between px-4 shrink-0 z-20">
        <div class="flex items-center gap-3">
            <div class="w-8 h-8 rounded bg-gradient-to-br from-violet-600 to-indigo-600 flex items-center justify-center text-white shadow-lg">
                <i class="fa-solid fa-utensils text-sm"></i>
            </div>
            <h1 class="font-bold text-lg tracking-tight text-white">Meal Randomizer</h1>
        </div>
        <div>
            </div>
    </header>

    <main class="flex-1 overflow-y-auto p-4 md:p-8 flex flex-col items-center">
        
        <div class="w-full max-w-4xl space-y-8">

            <div class="flex justify-center w-full">
                <div class="inline-flex bg-obsidian-pane p-1 rounded-lg border border-obsidian-border">
                    <button onclick="setMealType('breakfast')" id="btn-breakfast" class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:text-white">Breakfast</button>
                    <button onclick="setMealType('lunch')" id="btn-lunch" class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:text-white">Lunch</button>
                    <button onclick="setMealType('dinner')" id="btn-dinner" class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:text-white bg-obsidian-accent text-white shadow-md">Dinner</button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                
                <div class="bg-obsidian-pane border border-obsidian-border rounded-xl p-4 flex flex-col h-40 relative group">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-mono text-gray-500 uppercase tracking-widest">Cuisine</span>
                        <input type="checkbox" id="lock-cuisine" class="lock-checkbox hidden">
                        <label for="lock-cuisine" class="text-gray-600 hover:text-gray-400 cursor-pointer transition-colors p-1 border border-transparent rounded hover:border-obsidian-border">
                            <i class="fa-solid fa-lock-open text-sm"></i>
                        </label>
                    </div>
                    <div class="flex-1 flex items-center justify-center text-center overflow-hidden">
                        <span id="slot-cuisine" class="text-xl md:text-2xl font-bold text-white font-mono break-words">--</span>
                    </div>
                </div>

                <div class="bg-obsidian-pane border border-obsidian-border rounded-xl p-4 flex flex-col h-40 relative group">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-mono text-gray-500 uppercase tracking-widest">Protein</span>
                        <input type="checkbox" id="lock-protein" class="lock-checkbox hidden">
                        <label for="lock-protein" class="text-gray-600 hover:text-gray-400 cursor-pointer transition-colors p-1 border border-transparent rounded hover:border-obsidian-border">
                            <i class="fa-solid fa-lock-open text-sm"></i>
                        </label>
                    </div>
                    <div class="flex-1 flex items-center justify-center text-center overflow-hidden">
                        <span id="slot-protein" class="text-xl md:text-2xl font-bold text-white font-mono break-words">--</span>
                    </div>
                </div>

                <div class="bg-obsidian-pane border border-obsidian-border rounded-xl p-4 flex flex-col h-40 relative group">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-mono text-gray-500 uppercase tracking-widest">Side Dish 1</span>
                        <input type="checkbox" id="lock-side1" class="lock-checkbox hidden">
                        <label for="lock-side1" class="text-gray-600 hover:text-gray-400 cursor-pointer transition-colors p-1 border border-transparent rounded hover:border-obsidian-border">
                            <i class="fa-solid fa-lock-open text-sm"></i>
                        </label>
                    </div>
                    <div class="flex-1 flex items-center justify-center text-center overflow-hidden">
                        <span id="slot-side1" class="text-xl md:text-2xl font-bold text-white font-mono break-words">--</span>
                    </div>
                </div>

                <div class="bg-obsidian-pane border border-obsidian-border rounded-xl p-4 flex flex-col h-40 relative group">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-mono text-gray-500 uppercase tracking-widest">Side Dish 2</span>
                        <input type="checkbox" id="lock-side2" class="lock-checkbox hidden">
                        <label for="lock-side2" class="text-gray-600 hover:text-gray-400 cursor-pointer transition-colors p-1 border border-transparent rounded hover:border-obsidian-border">
                            <i class="fa-solid fa-lock-open text-sm"></i>
                        </label>
                    </div>
                    <div class="flex-1 flex items-center justify-center text-center overflow-hidden">
                        <span id="slot-side2" class="text-xl md:text-2xl font-bold text-white font-mono break-words">--</span>
                    </div>
                </div>

            </div>

            <div class="flex flex-col items-center gap-6 mt-8">
                <button onclick="spinSlots()" id="spin-btn" class="group relative px-8 py-4 bg-obsidian-accent hover:bg-violet-600 text-white font-bold rounded-full shadow-lg hover:shadow-violet-500/20 transition-all duration-300 transform active:scale-95 w-full md:w-auto min-w-[200px] border border-transparent">
                    <span class="flex items-center justify-center gap-2">
                        <i class="fa-solid fa-arrows-rotate group-hover:rotate-180 transition-transform duration-500"></i>
                        GENERATE MEAL
                    </span>
                </button>

                <div class="h-px w-full max-w-lg bg-obsidian-border"></div>

                <div class="flex flex-col md:flex-row gap-3 w-full justify-center max-w-lg">
                    <button onclick="searchGoogle()" class="flex-1 px-4 py-3 bg-obsidian-pane border border-obsidian-border hover:border-gray-500 hover:bg-[#2a2a2c] text-sm text-gray-300 rounded-lg transition-colors flex items-center justify-center gap-2">
                        <i class="fa-brands fa-google text-blue-400"></i>
                        Find Recipe on Google
                    </button>
                    
                    <button onclick="copyAIPrompt()" class="flex-1 px-4 py-3 bg-obsidian-pane border border-obsidian-border hover:border-gray-500 hover:bg-[#2a2a2c] text-sm text-gray-300 rounded-lg transition-colors flex items-center justify-center gap-2 relative">
                        <i class="fa-solid fa-robot text-emerald-400"></i>
                        Copy AI Prompt
                    </button>
                </div>
            </div>

        </div>
    </main>

    <div id="toast-container" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 z-50 pointer-events-none">
        </div>

    <footer class="bg-obsidian-pane border-t border-obsidian-border py-3 text-center shrink-0 z-10 flex flex-col md:flex-row justify-center items-center gap-3">
        <a href="https://homelabplayground.com" class="text-gray-500 hover:text-violet-400 text-xs transition-colors font-sans no-underline">
            HomeLab Playground
        </a>
    
        <span class="hidden md:block text-obsidian-border mx-1">|</span>
    
        <a href="https://www.buymeacoffee.com/bryjogar" target="_blank" class="inline-flex items-center px-3 py-1 bg-obsidian-accent hover:bg-violet-600 text-white text-xs font-sans rounded-full transition-colors no-underline">
            <i class="fa-solid fa-mug-hot mr-1.5"></i>
            <span>Support The Tools</span>
        </a>
    </footer>

    <script>
        // --- Data Source ---
        const database = {
            breakfast: {
                cuisine: ['American', 'British', 'French', 'Mexican', 'Healthy', 'Southern', 'German'],
                protein: ['Scrambled Eggs', 'Bacon', 'Sausage Links', 'Greek Yogurt', 'Smoked Salmon', 'Tofu Scramble', 'Fried Egg', 'Poached Egg', 'Chorizo', 'Black Beans'],
                side: ['Buttered Toast', 'Hashbrowns', 'Fruit Salad', 'Pancakes', 'Avocado', 'Oatmeal', 'Croissant', 'Grits', 'SautÃ©ed Spinach', 'Bagel']
            },
            lunch: {
                cuisine: ['Italian', 'Mexican', 'Chinese', 'Indian', 'American', 'Mediterranean', 'Thai', 'Japanese', 'Greek', 'Vietnamese'],
                protein: ['Grilled Chicken', 'Turkey Slices', 'Tuna Salad', 'Hard Boiled Eggs', 'Tofu', 'Hummus', 'Shrimp', 'Black Beans', 'Salami'],
                side: ['Side Salad', 'Apple Slices', 'Chips', 'Carrot Sticks', 'Quinoa', 'Soup Cup', 'Coleslaw', 'Edamame', 'Pita Bread', 'Fries']
            },
            dinner: {
                cuisine: ['Italian', 'Mexican', 'Chinese', 'Indian', 'American', 'Mediterranean', 'Thai', 'Japanese', 'French', 'BBQ', 'Cajun'],
                protein: ['Steak', 'Roast Chicken', 'Salmon Filet', 'Pork Chops', 'Lentil Stew', 'Ground Beef', 'Meatballs', 'Cod', 'Lamb', 'Tempeh'],
                side: ['Mashed Potatoes', 'Roasted Broccoli', 'Caesar Salad', 'Garlic Bread', 'Steamed Rice', 'Asparagus', 'Mac & Cheese', 'Corn on Cob', 'Green Beans', 'Risotto']
            }
        };

        // --- State ---
        let currentMealType = 'dinner';
        let isSpinning = false;

        // --- DOM Elements ---
        const els = {
            cuisine: document.getElementById('slot-cuisine'),
            protein: document.getElementById('slot-protein'),
            side1: document.getElementById('slot-side1'),
            side2: document.getElementById('slot-side2')
        };

        const locks = {
            cuisine: document.getElementById('lock-cuisine'),
            protein: document.getElementById('lock-protein'),
            side1: document.getElementById('lock-side1'),
            side2: document.getElementById('lock-side2')
        };

        // --- Core Functions ---

        function setMealType(type) {
            if (isSpinning) return;
            currentMealType = type;

            // Update Buttons Styles
            ['breakfast', 'lunch', 'dinner'].forEach(t => {
                const btn = document.getElementById(`btn-${t}`);
                if (t === type) {
                    btn.className = "px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:text-white bg-obsidian-accent text-white shadow-md";
                } else {
                    btn.className = "px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 hover:text-white text-gray-400";
                }
            });

            // Reset locks when changing categories
            Object.values(locks).forEach(lock => lock.checked = false);
            spinSlots(true); 
        }

        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        async function spinSlots(isQuick = false) {
            if (isSpinning) return;
            isSpinning = true;

            const btn = document.getElementById('spin-btn');
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            const keys = ['cuisine', 'protein', 'side1', 'side2'];
            const dataset = database[currentMealType];

            // Configuration for spin animation
            const baseDuration = isQuick ? 500 : 1500;
            const stagger = isQuick ? 100 : 400;

            const intervals = {};
            
            // Start spinning unlocked slots
            keys.forEach(key => {
                if (!locks[key].checked) {
                    els[key].classList.add('spinning-text');
                    intervals[key] = setInterval(() => {
                        let pool = (key === 'side1' || key === 'side2') ? dataset.side : dataset[key];
                        els[key].innerText = getRandomItem(pool);
                    }, 80);
                }
            });

            // Stop them in sequence
            for (let i = 0; i < keys.length; i++) {
                const key = keys[i];
                if (!locks[key].checked) {
                    await new Promise(r => setTimeout(r, stagger));
                    
                    clearInterval(intervals[key]);
                    els[key].classList.remove('spinning-text');
                    
                    let pool = (key === 'side1' || key === 'side2') ? dataset.side : dataset[key];
                    let finalValue = getRandomItem(pool);

                    // Prevent duplicate sides
                    if (key === 'side2' && !locks.side1.checked && finalValue === els.side1.innerText) {
                        let safety = 0;
                        while (finalValue === els.side1.innerText && safety < 10) {
                            finalValue = getRandomItem(pool);
                            safety++;
                        }
                    }

                    els[key].innerText = finalValue;
                    
                    // Pop animation
                    els[key].animate([
                        { transform: 'scale(1.2)', color: '#fff' },
                        { transform: 'scale(1)', color: '#ccc' }
                    ], { duration: 200 });
                }
            }
            
            setTimeout(() => {
                isSpinning = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
            }, 200);
        }

        // --- Action Logic ---

        function getComponents() {
            return {
                cuisine: els.cuisine.innerText,
                protein: els.protein.innerText,
                side1: els.side1.innerText,
                side2: els.side2.innerText,
                type: currentMealType
            };
        }

        function searchGoogle() {
            const c = getComponents();
            if(c.cuisine === '--') return; // Prevent searching if empty

            // Query: "Italian Steak with Mashed Potatoes and Roasted Broccoli recipe"
            const query = `${c.cuisine} ${c.protein} with ${c.side1} and ${c.side2} recipe`;
            const url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
            window.open(url, '_blank');
        }

        function copyAIPrompt() {
            const c = getComponents();
            if(c.cuisine === '--') return;

            // Prompt engineering
            const prompt = `Act as a professional chef. Create a detailed recipe for a ${c.type} meal.\n\nTheme: ${c.cuisine}\nMain Component: ${c.protein}\nSide Dish 1: ${c.side1}\nSide Dish 2: ${c.side2}\n\nPlease provide:\n1. A creative title for the dish.\n2. Ingredients list.\n3. Step-by-step cooking instructions timing everything so components are ready at the same time.`;

            navigator.clipboard.writeText(prompt).then(() => {
                showToast("AI Prompt Copied!", "success");
            }).catch(err => {
                showToast("Failed to copy", "error");
            });
        }

        function showToast(message, type) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            // Style based on type
            const bgClass = type === 'success' ? 'bg-obsidian-accent text-white' : 'bg-red-600 text-white';
            
            toast.className = `${bgClass} px-4 py-2 rounded-lg shadow-xl text-sm font-medium animate-fade-in flex items-center gap-2`;
            toast.innerHTML = type === 'success' 
                ? `<i class="fa-solid fa-check"></i> ${message}` 
                : `<i class="fa-solid fa-triangle-exclamation"></i> ${message}`;

            container.appendChild(toast);

            // Remove after delay
            setTimeout(() => {
                toast.classList.replace('animate-fade-in', 'animate-fade-out');
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }

        // --- Initialization ---
        window.addEventListener('DOMContentLoaded', () => {
            spinSlots(true);
        });

    </script>
</body>
</html>